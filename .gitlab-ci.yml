# .gitlab-ci.yml
---

# variables:
#   DOCKER_AUTH_CONFIG: $CI_DOCKER_AUTH_CONFIG

default:

  # before_script:
  #   - docker login $CI_REGISTRY -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD
  
  image: $CI_REGISTRY/artifactory/default-docker-remote/pipelinecomponents/ansible-lint:latest
  # image: pipelinecomponents/ansible-lint:latest


  
stages:
  - ansible-lint
  - ansible-syntax-check


ansible-lint:
  stage: ansible-lint
  script:
    - ansible-lint loop_count.yml

ansible-syntax-check:
  stage: ansible-syntax-check
  script:
    - ansible-playbook --inventory inventory --syntax-check loop_count.yml
  #  - ansible-playbook  --syntax-check loop_count.yml

